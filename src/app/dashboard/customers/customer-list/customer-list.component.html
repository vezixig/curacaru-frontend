<!-- Header -->
<h4 [class.h-underline]="!user?.isManager">Kundenliste</h4>

@if (user?.isManager) {
<Button type="button" [routerLink]="['/dashboard/customers/new']" class="btn btn-primary btn-block mb-3 w-100">Kunden hinzuf√ºgen</Button>
}

<!-- Filter -->
@if(filterModel$ | async; as filterModel) {
<div class="form-group p-0">
  <label class="fw-light" for="dpFromDate">Mitarbeiter</label>
  <select class="form-select" name="employeeSelect" [(ngModel)]="selectedEmployeeId" (change)="onSelectionChanged()">
    <option></option>
    @for (employee of filterModel.employees; track employee) {
    <option [value]="employee.id">{{ employee.name }}</option>
    }
  </select>
</div>

<!-- customers -->
@if(isMobile()) {
<cura-customer-list-mobile
  [customers]="customers()"
  [isLoading]="isLoading()"
  [isManager]="user!.isManager"
  (onDelete)="handleDelete($event)"
  (onNavigate)="handleNavigate($event)"
  (onShowAppointments)="handleShowAppointments($event)"
  (onShowDeploymentReports)="handleShowDeploymentReports($event)"
  (onShowInvoices)="handleShowInvoices($event)"
/>
} @else {
<cura-customer-list-table
  [customers]="customers()"
  [isLoading]="isLoading()"
  [isManager]="user!.isManager"
  (onDelete)="handleDelete($event)"
  (onNavigate)="handleNavigate($event)"
  (onShowAppointments)="handleShowAppointments($event)"
  (onShowDeploymentReports)="handleShowDeploymentReports($event)"
  (onShowInvoices)="handleShowInvoices($event)"
/>
}
<!-- filter loader -->
} @else {<cura-loader-filter />}
